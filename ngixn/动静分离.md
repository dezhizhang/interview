## 动态分离

server
{
    listen 80;
    listen 443 ssl http2;
    server_name www.xiaozhi.shop;
    #index index.html index.htm default.htm default.html;
    #root /home/xiaozhi/;

   
    # 正侧表达式匹配
    location / {
        
        valid_referers 192.168.44.101;
        if($valid_referers) {
            return 403;
        }

        # rewrite
        rewrite ^/([0-9]+).html$ /index.jsp?page=$1 break;

        proxy_pass http://127.0.0.1:8082;
    }
    
    location ~*/(js|img|css) {
        root html;
        index index.html index.html;
    }

   #access_log  /www/wwwlogs/xiaozhi.log;
   #error_log  /www/wwwlogs/xiaozhi.error.log;

}